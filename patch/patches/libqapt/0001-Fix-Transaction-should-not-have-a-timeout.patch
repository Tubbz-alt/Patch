From 2933dbde5cb4a496a39f4867548557c6afe19b88 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=E7=9F=B3=E5=8D=9A=E6=96=87?= <sbw@sbw.so>
Date: Thu, 7 Dec 2017 15:59:56 +0800
Subject: [PATCH] Fix: Transaction should not have a timeout.

We need to watting forever until dpkg is finished.
---
 src/worker/aptworker.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/worker/aptworker.cpp b/src/worker/aptworker.cpp
index 7f05515..95f90ec 100644
--- a/src/worker/aptworker.cpp
+++ b/src/worker/aptworker.cpp
@@ -204,7 +204,8 @@ void AptWorker::runTransaction(Transaction *trans)
         break;
     case QApt::InstallFileRole:
         installFile();
-        m_dpkgProcess->waitForFinished();
+        // waitting forever until dpkg finished
+        m_dpkgProcess->waitForFinished(-1);
         break;
     case QApt::DownloadArchivesRole:
         downloadArchives();
-- 
2.13.3

